exports.id=823,exports.ids=[823],exports.modules={72646:(e,t,r)=>{let n={unstable_cache:r(44991).A,revalidateTag:r(37465).revalidateTag,revalidatePath:r(37465).revalidatePath,unstable_noStore:r(35239).P,unstable_cacheLife:r(68784).R,unstable_cacheTag:r(40145).H};e.exports=n,t.unstable_cache=n.unstable_cache,t.revalidatePath=n.revalidatePath,t.revalidateTag=n.revalidateTag,t.unstable_noStore=n.unstable_noStore,t.unstable_cacheLife=n.unstable_cacheLife,t.unstable_cacheTag=n.unstable_cacheTag},66600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return a},extractInterceptionRouteInformation:function(){return i},isInterceptionRouteAppPath:function(){return s}});let n=r(82045),a=["(..)(..)","(.)","(..)","(...)"];function s(e){return void 0!==e.split("/").find(e=>a.find(t=>e.startsWith(t)))}function i(e){let t,r,s;for(let n of e.split("/"))if(r=a.find(e=>n.startsWith(e))){[t,s]=e.split(r,2);break}if(!t||!r||!s)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=(0,n.normalizeAppPath)(t),r){case"(.)":s="/"===t?`/${s}`:t+"/"+s;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);s=t.split("/").slice(0,-1).concat(s).join("/");break;case"(...)":s="/"+s;break;case"(..)(..)":let i=t.split("/");if(i.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);s=i.slice(0,-2).concat(s).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:s}}},68784:(e,t,r)=>{"use strict";function n(e){throw Error("cacheLife() is only available with the experimental.dynamicIO config.")}Object.defineProperty(t,"R",{enumerable:!0,get:function(){return n}}),r(79348),r(30412)},40145:(e,t,r)=>{"use strict";function n(...e){throw Error("cacheTag() is only available with the experimental.dynamicIO config.")}Object.defineProperty(t,"H",{enumerable:!0,get:function(){return n}}),r(30412),r(83771)},37465:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{revalidatePath:function(){return c},revalidateTag:function(){return u}});let n=r(85508),a=r(34486),s=r(28930),i=r(79348),o=r(30412),l=r(63159);function u(e){return f(e,`revalidateTag ${e}`)}function c(e,t){if(e.length>s.NEXT_CACHE_SOFT_TAG_MAX_LENGTH){console.warn(`Warning: revalidatePath received "${e}" which exceeded max length of ${s.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`);return}let r=`${s.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,a.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "revalidatePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`),f(r,`revalidatePath ${e}`)}function f(e,t){let r=i.workAsyncStorage.getStore();if(!r||!r.incrementalCache)throw Error(`Invariant: static generation store missing in ${t}`);let a=o.workUnitAsyncStorage.getStore();if(a){if("cache"===a.type)throw Error(`Route ${r.route} used "${t}" inside a "use cache" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if("unstable-cache"===a.type)throw Error(`Route ${r.route} used "${t}" inside a function cached with "unstable_cache(...)" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if("render"===a.phase)throw Error(`Route ${r.route} used "${t}" during render which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if("prerender"===a.type){let e=Error(`Route ${r.route} used ${t} without first calling \`await connection()\`.`);(0,n.abortAndThrowOnSynchronousRequestDataAccess)(r.route,t,e,a)}else if("prerender-ppr"===a.type)(0,n.postponeWithTracking)(r.route,t,a.dynamicTracking);else if("prerender-legacy"===a.type){a.revalidate=0;let e=new l.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw r.dynamicUsageDescription=t,r.dynamicUsageStack=e.stack,e}}r.revalidatedTags||(r.revalidatedTags=[]),r.revalidatedTags.includes(e)||r.revalidatedTags.push(e),r.pathWasRevalidated=!0}},44991:(e,t,r)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return c}});let n=r(28930),a=r(83771),s=r(79348),i=r(30412),o=r(59121),l=0;async function u(e,t,r,a,s,i,l){await t.set(r,{kind:o.CachedRouteKind.FETCH,data:{headers:{},body:JSON.stringify(e),status:200,url:""},revalidate:"number"!=typeof s?n.CACHE_ONE_YEAR:s},{revalidate:s,fetchCache:!0,tags:a,fetchIdx:i,fetchUrl:l})}function c(e,t,r={}){if(0===r.revalidate)throw Error(`Invariant revalidate: 0 can not be passed to unstable_cache(), must be "false" or "> 0" ${e.toString()}`);let n=r.tags?(0,a.validateTags)(r.tags,`unstable_cache ${e.toString()}`):[];(0,a.validateRevalidate)(r.revalidate,`unstable_cache ${e.name||e.toString()}`);let f=`${e.toString()}-${Array.isArray(t)&&t.join(",")}`;return async(...t)=>{let a=s.workAsyncStorage.getStore(),c=i.workUnitAsyncStorage.getStore(),d=(null==a?void 0:a.incrementalCache)||globalThis.__incrementalCache;if(!d)throw Error(`Invariant: incrementalCache missing in unstable_cache ${e.toString()}`);let p=c&&"prerender"===c.type?c.cacheSignal:null;p&&p.beginRead();try{let s=c&&"request"===c.type?c:void 0,p=(null==s?void 0:s.url.pathname)??(null==a?void 0:a.route)??"",h=new URLSearchParams((null==s?void 0:s.url.search)??""),y=[...h.keys()].sort((e,t)=>e.localeCompare(t)).map(e=>`${e}=${h.get(e)}`).join("&"),m=`${f}-${JSON.stringify(t)}`,g=await d.generateCacheKey(m),b=`unstable_cache ${p}${y.length?"?":""}${y} ${e.name?` ${e.name}`:g}`,E=(a?a.nextFetchId:l)??1;if(a){if(a.nextFetchId=E+1,c&&("cache"===c.type||"prerender"===c.type||"prerender-ppr"===c.type||"prerender-legacy"===c.type)){"number"==typeof r.revalidate&&(c.revalidate<r.revalidate||(c.revalidate=r.revalidate));let e=c.tags;if(null===e)c.tags=n.slice();else for(let t of n)e.includes(t)||e.push(t)}let s=c&&"unstable-cache"!==c.type?c.implicitTags:[];if(!(c&&"unstable-cache"===c.type)&&"force-no-store"!==a.fetchCache&&!a.isOnDemandRevalidate&&!d.isOnDemandRevalidate&&!a.isDraftMode){let l=await d.get(g,{kind:o.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:n,softTags:s,fetchIdx:E,fetchUrl:b,isFallback:!1});if(l&&l.value){if(l.value.kind!==o.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${m}`);else{let s=void 0!==l.value.data.body?JSON.parse(l.value.data.body):void 0;return l.isStale&&(a.pendingRevalidates||(a.pendingRevalidates={}),a.pendingRevalidates[m]=i.workUnitAsyncStorage.run({type:"unstable-cache",phase:"render"},e,...t).then(e=>u(e,d,g,n,r.revalidate,E,b)).catch(e=>console.error(`revalidating cache with key: ${m}`,e))),s}}}let l=await i.workUnitAsyncStorage.run({type:"unstable-cache",phase:"render"},e,...t);return a.isDraftMode||u(l,d,g,n,r.revalidate,E,b),l}{if(l+=1,!d.isOnDemandRevalidate){let e=c&&"unstable-cache"!==c.type?c.implicitTags:[],t=await d.get(g,{kind:o.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:n,fetchIdx:E,fetchUrl:b,softTags:e,isFallback:!1});if(t&&t.value){if(t.value.kind!==o.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${m}`);else if(!t.isStale)return void 0!==t.value.data.body?JSON.parse(t.value.data.body):void 0}}let a=await i.workUnitAsyncStorage.run({type:"unstable-cache",phase:"render"},e,...t);return u(a,d,g,n,r.revalidate,E,b),a}}finally{p&&p.endRead()}}}},35239:(e,t,r)=>{"use strict";Object.defineProperty(t,"P",{enumerable:!0,get:function(){return i}});let n=r(79348),a=r(30412),s=r(85508);function i(){let e=n.workAsyncStorage.getStore(),t=a.workUnitAsyncStorage.getStore();return e?e.forceStatic?void 0:void(e.isUnstableNoStore=!0,t&&"prerender"===t.type||(0,s.markCurrentScopeAsDynamic)(e,t,"unstable_noStore()")):void 0}},65361:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},82045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return s},normalizeRscURL:function(){return i}});let n=r(65361),a=r(99107);function s(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,a.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function i(e){return e.replace(/\.rsc($|\?)/,"$1")}},34486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return n.getSortedRouteObjects},getSortedRoutes:function(){return n.getSortedRoutes},isDynamicRoute:function(){return a.isDynamicRoute}});let n=r(85035),a=r(36669)},36669:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return s}});let n=r(66600),a=/\/\[[^/]+?\](?=\/|$)/;function s(e){return(0,n.isInterceptionRouteAppPath)(e)&&(e=(0,n.extractInterceptionRouteInformation)(e).interceptedRoute),a.test(e)}},85035:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return a},getSortedRoutes:function(){return n}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").');r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,n){if(0===e.length){this.placeholder=!1;return}if(n)throw Error("Catch-all must be the last part of the URL.");let a=e[0];if(a.startsWith("[")&&a.endsWith("]")){let r=a.slice(1,-1),i=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),i=!0),r.startsWith("…"))throw Error("Detected a three-dot character ('…') at ('"+r+"'). Did you mean ('...')?");if(r.startsWith("...")&&(r=r.substring(3),n=!0),r.startsWith("[")||r.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+r+"').");if(r.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+r+"').");function s(e,r){if(null!==e&&e!==r)throw Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"').");t.forEach(e=>{if(e===r)throw Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path');if(e.replace(/\W/g,"")===a.replace(/\W/g,""))throw Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path')}),t.push(r)}if(n){if(i){if(null!=this.restSlugName)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).');s(this.optionalRestSlugName,r),this.optionalRestSlugName=r,a="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").');s(this.restSlugName,r),this.restSlugName=r,a="[...]"}}else{if(i)throw Error('Optional route parameters are not yet supported ("'+e[0]+'").');s(this.slugName,r),this.slugName=r,a="[]"}}this.children.has(a)||this.children.set(a,new r),this.children.get(a)._insert(e.slice(1),t,n)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}function a(e,t){let r={},a=[];for(let n=0;n<e.length;n++){let s=t(e[n]);r[s]=n,a[n]=s}return n(a).map(t=>e[r[t]])}},99107:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}function n(e,t){if(e.includes(a)){let e=JSON.stringify(t);return"{}"!==e?a+"?"+e:a}return e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return s},PAGE_SEGMENT_KEY:function(){return a},addSearchParamsIfPageSegment:function(){return n},isGroupSegment:function(){return r}});let a="__PAGE__",s="__DEFAULT__"},68438:(e,t,r)=>{"use strict";r.d(t,{bR:()=>n.bR,rN:()=>a.r}),r(43984);var n=r(18600);r(64528),r(93707),r(58231),r(1330),r(265);var a=r(42191);r(92212),r(53949),r(52193)},27945:(e,t,r)=>{"use strict";r.d(t,{I:()=>s});let n=()=>{},a=e=>{Object.freeze&&Object.freeze(e)},s=e=>(function e(t,r,s){let i=r.join(".");return s[i]??(s[i]=new Proxy(n,{get(n,a){if("string"==typeof a&&"then"!==a)return e(t,[...r,a],s)},apply(e,n,s){let i=r[r.length-1],o={args:s,path:r};return"call"===i?o={args:s.length>=2?[s[1]]:[],path:r.slice(0,-1)}:"apply"===i&&(o={args:s.length>=2?s[1]:[],path:r.slice(0,-1)}),a(o.args),a(o.path),t(o)}})),s[i]})(e,[],Object.create(null))},18600:(e,t,r)=>{"use strict";r.d(t,{bR:()=>o,px:()=>i});var n=r(89115);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends Error{}function i(e){if(e instanceof o||e instanceof Error&&"TRPCError"===e.name)return e;let t=new o({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(t.stack=e.stack),t}class o extends Error{constructor(e){let t=function(e){if(e instanceof Error)return e;let t=typeof e;if("undefined"!==t&&"function"!==t&&null!==e){if("object"!==t)return Error(String(e));if((0,n.Kn)(e)){let t=new s;for(let r in e)t[r]=e[r];return t}}}(e.cause);super(e.message??t?.message??e.code,{cause:t}),a(this,"cause",void 0),a(this,"code",void 0),this.code=e.code,this.name="TRPCError",this.cause||(this.cause=t)}}},41751:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});let n=({shape:e})=>e},43984:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});var n=r(68253),a=r(39403);function s(e){let{path:t,error:r,config:s}=e,{code:i}=e.error,o={message:r.message,code:a.u[i],data:{code:i,httpStatus:(0,n.nV)(r)}};return s.isDev&&"string"==typeof e.error.stack&&(o.data.stack=e.error.stack),"string"==typeof t&&(o.data.path=t),s.errorFormatter({...e,shape:o})}},31609:(e,t,r)=>{"use strict";r.d(t,{D:()=>a,T:()=>s});var n=r(89115);function a(e){return(0,n.Kn)(e)&&"AbortError"===e.name}function s(e="AbortError"){throw new DOMException(e,"AbortError")}},97661:(e,t,r)=>{"use strict";r.d(t,{X:()=>c});var n=r(18600),a=r(64528),s=r(89115),i=r(40989);function o(e){let t=null,r=s.yu;return{read:async()=>(r!==s.yu||(null===t&&(t=e().catch(e=>{if(e instanceof n.bR)throw e;throw new n.bR({code:"BAD_REQUEST",message:e instanceof Error?e.message:"Invalid input",cause:e})})),r=await t,t=null),r),result:()=>r!==s.yu?r:void 0}}let l={isMatch:e=>!!e.headers.get("content-type")?.startsWith("application/json"),async parse(e){let{req:t}=e,r="1"===e.searchParams.get("batch"),l=r?e.path.split(","):[e.path],u=o(async()=>{let a;if("GET"===t.method){let t=e.searchParams.get("input");t&&(a=JSON.parse(t))}else a=await t.json();if(void 0===a)return{};if(!r)return{0:e.router._def._config.transformer.input.deserialize(a)};if(!(0,s.Kn)(a))throw new n.bR({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});let i={};for(let t of l.keys()){let r=a[t];void 0!==r&&(i[t]=e.router._def._config.transformer.input.deserialize(r))}return i}),c=await Promise.all(l.map(async(t,r)=>{let n=await (0,a.ST)(e.router,t);return{path:t,procedure:n,getRawInput:async()=>{let t=(await u.read())[r];if(n?._def.type==="subscription"){let r=e.headers.get("last-event-id")??e.searchParams.get("lastEventId")??e.searchParams.get("Last-Event-Id");r&&((0,s.Kn)(t)?t={...t,lastEventId:r}:t??(t={lastEventId:r}))}return t},result:()=>u.result()?.[r]}})),f=new Set(c.map(e=>e.procedure?._def.type).filter(Boolean));if(f.size>1)throw new n.bR({code:"BAD_REQUEST",message:`Cannot mix procedure types in call: ${Array.from(f).join(", ")}`});let d=f.values().next().value??"unknown",p=e.searchParams.get("connectionParams");return{isBatchCall:r,accept:t.headers.get("trpc-accept"),calls:c,type:d,connectionParams:null===p?null:(0,i.J)(p),signal:t.signal,url:e.url}}},u=[l,{isMatch:e=>!!e.headers.get("content-type")?.startsWith("multipart/form-data"),async parse(e){let{req:t}=e;if("POST"!==t.method)throw new n.bR({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for multipart/form-data requests"});let r=o(async()=>await t.formData()),s=await (0,a.ST)(e.router,e.path);return{accept:null,calls:[{path:e.path,getRawInput:r.read,result:r.result,procedure:s}],isBatchCall:!1,type:"mutation",connectionParams:null,signal:t.signal,url:e.url}}},{isMatch:e=>!!e.headers.get("content-type")?.startsWith("application/octet-stream"),async parse(e){let{req:t}=e;if("POST"!==t.method)throw new n.bR({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for application/octet-stream requests"});let r=o(async()=>t.body);return{calls:[{path:e.path,getRawInput:r.read,result:r.result,procedure:await (0,a.ST)(e.router,e.path)}],isBatchCall:!1,accept:null,type:"mutation",connectionParams:null,signal:t.signal,url:e.url}}}];async function c(e){let t=function(e){let t=u.find(t=>t.isMatch(e));if(t)return t;if(!t&&"GET"===e.method)return l;throw new n.bR({code:"UNSUPPORTED_MEDIA_TYPE",message:e.headers.has("content-type")?`Unsupported content-type "${e.headers.get("content-type")}`:"Missing content-type header"})}(e.req);return await t.parse(e)}},68253:(e,t,r)=>{"use strict";r.d(t,{Je:()=>i,nV:()=>o});var n=r(39403),a=r(89115);let s={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504};function i(e){let t=new Set((Array.isArray(e)?e:[e]).map(e=>"error"in e&&(0,a.Kn)(e.error.data)?"number"==typeof e.error.data?.httpStatus?e.error.data.httpStatus:s[n.X[e.error.code]]??500:200));return 1!==t.size?207:t.values().next().value}function o(e){return s[e.code]??500}},40989:(e,t,r)=>{"use strict";r.d(t,{J:()=>s});var n=r(18600),a=r(89115);function s(e){let t;try{t=JSON.parse(e)}catch(e){throw new n.bR({code:"PARSE_ERROR",message:"Not JSON-parsable query params",cause:e})}return function(e){try{if(null===e)return null;if(!(0,a.Kn)(e))throw Error("Expected object");let t=Object.entries(e).filter(([e,t])=>"string"!=typeof t);if(t.length>0)throw Error(`Expected connectionParams to be string values. Got ${t.map(([e,t])=>`${e}: ${typeof t}`).join(", ")}`);return e}catch(e){throw new n.bR({code:"PARSE_ERROR",message:"Invalid connection params shape",cause:e})}}(t)}},3712:(e,t,r)=>{"use strict";function n(e){return"object"==typeof e&&null!==e&&"subscribe"in e}function a(e,t){let r=(function(e,t){let r=null,n=()=>{r?.unsubscribe(),r=null,t.removeEventListener("abort",n)};return new ReadableStream({start(a){r=e.subscribe({next(e){a.enqueue({ok:!0,value:e})},error(e){a.enqueue({ok:!1,error:e}),a.close()},complete(){a.close()}}),t.aborted?n():t.addEventListener("abort",n,{once:!0})},cancel(){n()}})})(e,t).getReader(),n={async next(){let e=await r.read();if(e.done)return{value:void 0,done:!0};let{value:t}=e;if(!t.ok)throw t.error;return{value:t.value,done:!1}},return:async()=>(await r.cancel(),{value:void 0,done:!0})};return{[Symbol.asyncIterator]:()=>n}}r.d(t,{e:()=>b});var s=r(43984),i=r(18600),o=r(33183),l=r(21139),u=r(265),c=r(89115),f=r(97661),d=r(68253);function p(e){return(0,c.KH)(async function*(){throw e})}let h={mutation:["POST"],query:["GET"],subscription:["GET"]},y={mutation:["POST"],query:["GET","POST"],subscription:["GET","POST"]};function m(e){let{ctx:t,info:r,responseMeta:n,untransformedJSON:a,errors:s=[],headers:i}=e,o=a?(0,d.Je)(a):200,l=!a,u=l?[]:Array.isArray(a)?a:[a],c=n?.({ctx:t,info:r,paths:r?.calls.map(e=>e.path),data:u,errors:s,eagerGeneration:l,type:r?.calls.find(e=>e.procedure?._def.type)?.procedure?._def.type??"unknown"})??{};if(c.headers){if(c.headers instanceof Headers)for(let[e,t]of c.headers.entries())i.append(e,t);else for(let[e,t]of Object.entries(c.headers))if(Array.isArray(t))for(let r of t)i.append(e,r);else"string"==typeof t&&i.set(e,t)}return c.status&&(o=c.status),{status:o}}function g(e){return!!(0,c.Kn)(e)&&(!!(0,c.D0)(e)||Object.values(e).some(o.tI)||Object.values(e).some(c.D0))}async function b(e){let{router:t,req:r}=e,d=new Headers([["vary","trpc-accept"]]),b=t._def._config,E=new URL(r.url);if("HEAD"===r.method)return new Response(null,{status:204});let v=e.allowBatching??e.batching?.enabled??!0,w=(e.allowMethodOverride??!1)&&"POST"===r.method,S=await (0,c.KH)(async()=>{try{return[void 0,await (0,f.X)({req:r,path:decodeURIComponent(e.path),router:t,searchParams:E.searchParams,headers:e.req.headers,url:E})]}catch(e){return[(0,i.px)(e),void 0]}}),_=(0,c.KH)(()=>{let t;return{valueOrUndefined:()=>{if(t)return t[1]},value:()=>{let[e,r]=t;if(e)throw e;return r},create:async r=>{if(t)throw Error("This should only be called once - report a bug in tRPC");try{let n=await e.createContext({info:r});t=[void 0,n]}catch(e){t=[(0,i.px)(e),void 0]}}}}),O=w?y:h,R="application/jsonl"===r.headers.get("trpc-accept"),T=b.sse?.enabled??!0;try{let[t,f]=S;if(t)throw t;if(f.isBatchCall&&!v)throw new i.bR({code:"BAD_REQUEST",message:"Batching is not enabled on the server"});if(R&&!f.isBatchCall)throw new i.bR({message:"Streaming requests must be batched (you can do a batch of 1)",code:"BAD_REQUEST"});await _.create(f);let h=f.calls.map(async t=>{let n=t.procedure;try{if(e.error)throw e.error;if(!n)throw new i.bR({code:"NOT_FOUND",message:`No procedure found on path "${t.path}"`});if(!O[n._def.type].includes(r.method))throw new i.bR({code:"METHOD_NOT_SUPPORTED",message:`Unsupported ${r.method}-request to ${n._def.type} procedure at path "${t.path}"`});if("subscription"===n._def.type&&f.isBatchCall)throw new i.bR({code:"BAD_REQUEST",message:"Cannot batch subscription calls"});let a=await n({path:t.path,getRawInput:t.getRawInput,ctx:_.value(),type:n._def.type,signal:e.req.signal});return[void 0,{data:a}]}catch(a){let r=(0,i.px)(a),n=t.result();return e.onError?.({error:r,path:t.path,input:n,ctx:_.valueOrUndefined(),type:t.procedure?._def.type??"unknown",req:e.req}),[r,void 0]}});if(!f.isBatchCall){let[t]=f.calls,[r,o]=await h[0];switch(f.type){case"unknown":case"mutation":case"query":{if(d.set("content-type","application/json"),g(o?.data))throw new i.bR({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"});let n=r?{error:(0,s.B)({config:b,ctx:_.valueOrUndefined(),error:r,input:t.result(),path:t.path,type:f.type})}:{result:{data:o.data}},a=m({ctx:_.valueOrUndefined(),info:f,responseMeta:e.responseMeta,errors:r?[r]:[],headers:d,untransformedJSON:[n]});return new Response(JSON.stringify((0,u.KZ)(b,n)),{status:a.status,headers:d})}case"subscription":{let u=(0,c.KH)(()=>r?p(r):T?n(o.data)||(0,c.D0)(o.data)?n(o.data)?a(o.data,e.req.signal):o.data:p(new i.bR({message:`Subscription ${t.path} did not return an observable or a AsyncGenerator`,code:"INTERNAL_SERVER_ERROR"})):p(new i.bR({code:"METHOD_NOT_SUPPORTED",message:'Missing experimental flag "sseSubscriptions"'}))),h=(0,l.WO)({...b.sse,data:u,serialize:e=>b.transformer.output.serialize(e),formatError(r){let n=(0,i.px)(r.error),a=t?.result(),o=t?.path,l=t?.procedure?._def.type??"unknown";return e.onError?.({error:n,path:o,input:a,ctx:_.valueOrUndefined(),req:e.req,type:l}),(0,s.B)({config:b,ctx:_.valueOrUndefined(),error:n,input:a,path:o,type:l})}});for(let[e,t]of Object.entries(l.gl))d.set(e,t);let y=m({ctx:_.valueOrUndefined(),info:f,responseMeta:e.responseMeta,errors:[],headers:d,untransformedJSON:null});return new Response(h,{headers:d,status:y.status})}}}if("application/jsonl"===f.accept){d.set("content-type","application/json"),d.set("transfer-encoding","chunked");let t=m({ctx:_.valueOrUndefined(),info:f,responseMeta:e.responseMeta,errors:[],headers:d,untransformedJSON:null}),r=(0,o.Ln)({...b.jsonl,maxDepth:1/0,data:h.map(async t=>{let[r,i]=await t,o=f.calls[0];if(r)return{error:(0,s.B)({config:b,ctx:_.valueOrUndefined(),error:r,input:o.result(),path:o.path,type:o.procedure?._def.type??"unknown"})};let l=n(i.data)?a(i.data,e.req.signal):Promise.resolve(i.data);return{result:Promise.resolve({data:l})}}),serialize:b.transformer.output.serialize,onError:t=>{e.onError?.({error:i.px(t),path:void 0,input:void 0,ctx:_.valueOrUndefined(),req:e.req,type:f?.type??"unknown"})},formatError(e){let t=f?.calls[e.path[0]],r=(0,i.px)(e.error),n=t?.result(),a=t?.path,o=t?.procedure?._def.type??"unknown";return(0,s.B)({config:b,ctx:_.valueOrUndefined(),error:r,input:n,path:a,type:o})}});return new Response(r,{headers:d,status:t.status})}d.set("content-type","application/json");let y=(await Promise.all(h)).map(e=>{let[t,r]=e;return t?e:g(r.data)?[new i.bR({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"}),void 0]:e}),E=y.map(([e,t],r)=>{let n=f.calls[r];return e?{error:(0,s.B)({config:b,ctx:_.valueOrUndefined(),error:e,input:n.result(),path:n.path,type:n.procedure?._def.type??"unknown"})}:{result:{data:t.data}}}),w=y.map(([e])=>e).filter(Boolean),P=m({ctx:_.valueOrUndefined(),info:f,responseMeta:e.responseMeta,untransformedJSON:E,errors:w,headers:d});return new Response(JSON.stringify((0,u.KZ)(b,E)),{status:P.status,headers:d})}catch(c){let[t,r]=S,n=_.valueOrUndefined(),{error:a,untransformedJSON:o,body:l}=function(e,t){let{router:r,req:n,onError:a}=t.opts,o=(0,i.px)(e);a?.({error:o,path:t.path,input:t.input,ctx:t.ctx,type:t.type,req:n});let l={error:(0,s.B)({config:r._def._config,error:o,type:t.type,path:t.path,input:t.input,ctx:t.ctx})},c=JSON.stringify((0,u.KZ)(r._def._config,l));return{error:o,untransformedJSON:l,body:c}}(c,{opts:e,ctx:_.valueOrUndefined(),type:r?.type??"unknown"});return new Response(l,{status:m({ctx:n,info:r,responseMeta:e.responseMeta,untransformedJSON:o,errors:[a],headers:d}).status,headers:d})}}},42191:(e,t,r)=>{"use strict";r.d(t,{r:()=>c});var n=r(41751),a=r(92212),s=r(54465),i=r(52193),o=r(64528),l=r(265);class u{context(){return new u}meta(){return new u}create(e){let t={...e,transformer:(0,l.be)(e?.transformer??l.p_),isDev:e?.isDev??globalThis.process?.env.NODE_ENV!=="production",allowOutsideOfServer:e?.allowOutsideOfServer??!1,errorFormatter:e?.errorFormatter??n.F,isServer:e?.isServer??i.h,$types:null};if(!(e?.isServer??i.h)&&e?.allowOutsideOfServer!==!0)throw Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:t,procedure:(0,s.S)({meta:e?.defaultMeta}),middleware:(0,a.C$)(),router:(0,o.ZX)(t),mergeRouters:o.a7,createCallerFactory:(0,o.bn)()}}}let c=new u},92212:(e,t,r)=>{"use strict";r.d(t,{C$:()=>i,LA:()=>s,qS:()=>o,r4:()=>l});var n=r(18600),a=r(89115);let s="middlewareMarker";function i(){return function(e){return function e(t){return{_middlewares:t,unstable_pipe:r=>e([...t,..."_middlewares"in r?r._middlewares:[r]])}}([e])}}function o(e){let t=async function(t){let r;let s=await t.getRawInput();try{r=await e(s)}catch(e){throw new n.bR({code:"BAD_REQUEST",cause:e})}let i=(0,a.Kn)(t.input)&&(0,a.Kn)(r)?{...t.input,...r}:r;return t.next({input:i})};return t._type="input",t}function l(e){let t=async function({next:t}){let r=await t();if(!r.ok)return r;try{let t=await e(r.data);return{...r,data:t}}catch(e){throw new n.bR({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}};return t._type="output",t}},31058:(e,t,r)=>{"use strict";r.d(t,{o:()=>a});var n=r(53949);function a(e){if("function"==typeof e&&"function"==typeof e.assert)return e.assert.bind(e);if("function"==typeof e)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);if("function"==typeof e.assert)return t=>(e.assert(t),t);if("~standard"in e)return async t=>{let r=await e["~standard"].validate(t);if(r.issues)throw new n.R(r.issues);return r.value};throw Error("Could not find a validator fn")}},54465:(e,t,r)=>{"use strict";r.d(t,{S:()=>l});var n=r(18600),a=r(92212),s=r(31058),i=r(89115);function o(e,t){let{middlewares:r=[],inputs:n,meta:a,...s}=t;return l({...(0,i.Ne)(e,s),inputs:[...e.inputs,...n??[]],middlewares:[...e.middlewares,...r],meta:e.meta&&a?{...e.meta,...a}:a??e.meta})}function l(e={}){let t={procedure:!0,inputs:[],middlewares:[],...e};return{_def:t,input(e){let r=(0,s.o)(e);return o(t,{inputs:[e],middlewares:[(0,a.qS)(r)]})},output(e){let r=(0,s.o)(e);return o(t,{output:e,middlewares:[(0,a.r4)(r)]})},meta:e=>o(t,{meta:e}),use:e=>o(t,{middlewares:"_middlewares"in e?e._middlewares:[e]}),unstable_concat:e=>o(t,e._def),query:e=>u({...t,type:"query"},e),mutation:e=>u({...t,type:"mutation"},e),subscription:e=>u({...t,type:"subscription"},e),experimental_caller:e=>o(t,{caller:e})}}function u(e,t){let r=o(e,{resolver:t,middlewares:[async function(e){let r=await t(e);return{marker:a.LA,ok:!0,data:r,ctx:e.ctx}}]}),s={...r._def,type:e.type,experimental_caller:!!r._def.caller,meta:r._def.meta,$types:null},i=function(e){async function t(t){if(!t||!("getRawInput"in t))throw Error(c);let r=await f(0,e,t);if(!r)throw new n.bR({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!r.ok)throw r.error;return r.data}return t._def=e,t.procedure=!0,t}(r._def),l=r._def.caller;if(!l)return i;let u=async(...e)=>await l({args:e,invoke:i,_def:s});return u._def=s,u}let c=`
This is a client-only function.
If you want to call this function on the server, see https://trpc.io/docs/v11/server/server-side-calls
`.trim();async function f(e,t,r){try{let n=t.middlewares[e];return await n({...r,meta:t.meta,input:r.input,next:n=>f(e+1,t,{...r,ctx:n?.ctx?{...r.ctx,...n.ctx}:r.ctx,input:n&&"input"in n?n.input:r.input,getRawInput:n?.getRawInput??r.getRawInput})})}catch(e){return{ok:!1,error:(0,n.px)(e),marker:a.LA}}}},52193:(e,t,r)=>{"use strict";r.d(t,{h:()=>n});let n="undefined"==typeof window||"Deno"in window||globalThis.process?.env?.NODE_ENV==="test"||!!globalThis.process?.env?.JEST_WORKER_ID||!!globalThis.process?.env?.VITEST_WORKER_ID},64528:(e,t,r)=>{"use strict";r.d(t,{ST:()=>d,ZX:()=>f,a7:()=>h,bn:()=>p});var n=r(27945),a=r(41751),s=r(18600),i=r(265),o=r(89115);let l=Symbol("lazy"),u={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:a.F,transformer:i.p_},c=["then","call","apply"];function f(e){return function(t){let r=new Set(Object.keys(t).filter(e=>c.includes(e)));if(r.size>0)throw Error("Reserved words used in `router({})` call: "+Array.from(r).join(", "));let n=(0,o.St)({}),a=(0,o.St)({}),s=function e(t,r=[]){let s=(0,o.St)({});for(let[i,u]of Object.entries(t??{})){if("function"==typeof u&&l in u){a[[...r,i].join(".")]=function t(r){return{ref:r.ref,load:function(e){let t=Symbol(),r=t;return()=>(r===t&&(r=e()),r)}(async()=>{let n=await r.ref(),s=[...r.path,r.key],i=s.join(".");for(let[o,l]of(r.aggregate[r.key]=e(n._def.record,s),delete a[i],Object.entries(n._def.lazy)))a[[...s,o].join(".")]=t({ref:l.ref,path:s,key:o,aggregate:r.aggregate[r.key]})})}}({path:r,ref:u,key:i,aggregate:s});continue}if((0,o.Kn)(u)&&(0,o.Kn)(u._def)&&"router"in u._def){s[i]=e(u._def.record,[...r,i]);continue}if("function"!=typeof u){s[i]=e(u,[...r,i]);continue}let t=[...r,i].join(".");if(n[t])throw Error(`Duplicate key: ${t}`);n[t]=u,s[i]=u}return s}(t),i={_config:e,router:!0,procedures:n,lazy:a,...u,record:s};return{...s,_def:i,createCaller:p()({_def:i})}}}async function d(e,t){let{_def:r}=e,n=r.procedures[t];for(;!n;){let e=Object.keys(r.lazy).find(e=>t.startsWith(e));if(!e)return null;let a=r.lazy[e];await a.load(),n=r.procedures[t]}return n}function p(){return function(e){let{_def:t}=e;return function(r,a){return(0,n.I)(async({path:n,args:i})=>{let l;let u=n.join(".");if(1===n.length&&"_def"===n[0])return t;let c=await d(e,u);try{if(!c)throw new s.bR({code:"NOT_FOUND",message:`No procedure found on path "${n}"`});return l=(0,o.mf)(r)?await Promise.resolve(r()):r,await c({path:u,getRawInput:async()=>i[0],ctx:l,type:c._def.type,signal:a?.signal})}catch(e){throw a?.onError?.({ctx:l,error:s.px(e),input:i[0],path:u,type:c?._def.type??"unknown"}),e}})}}}function h(...e){let t=(0,o.Ne)({},...e.map(e=>e._def.record));return f({errorFormatter:e.reduce((e,t)=>{if(t._def._config.errorFormatter&&t._def._config.errorFormatter!==a.F){if(e!==a.F&&e!==t._def._config.errorFormatter)throw Error("You seem to have several error formatters");return t._def._config.errorFormatter}return e},a.F),transformer:e.reduce((e,t)=>{if(t._def._config.transformer&&t._def._config.transformer!==i.p_){if(e!==i.p_&&e!==t._def._config.transformer)throw Error("You seem to have several transformers");return t._def._config.transformer}return e},i.p_),isDev:e.every(e=>e._def._config.isDev),allowOutsideOfServer:e.every(e=>e._def._config.allowOutsideOfServer),isServer:e.every(e=>e._def._config.isServer),$types:e[0]?._def._config.$types})(t)}},39403:(e,t,r)=>{"use strict";r.d(t,{X:()=>a,u:()=>n});let n={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,BAD_GATEWAY:-32603,SERVICE_UNAVAILABLE:-32603,GATEWAY_TIMEOUT:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNSUPPORTED_MEDIA_TYPE:-32015,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},a={[-32700]:"PARSE_ERROR",[-32600]:"BAD_REQUEST",[-32603]:"INTERNAL_SERVER_ERROR",[-32001]:"UNAUTHORIZED",[-32003]:"FORBIDDEN",[-32004]:"NOT_FOUND",[-32005]:"METHOD_NOT_SUPPORTED",[-32008]:"TIMEOUT",[-32009]:"CONFLICT",[-32012]:"PRECONDITION_FAILED",[-32013]:"PAYLOAD_TOO_LARGE",[-32015]:"UNSUPPORTED_MEDIA_TYPE",[-32022]:"UNPROCESSABLE_CONTENT",[-32029]:"TOO_MANY_REQUESTS",[-32099]:"CLIENT_CLOSED_REQUEST"}},33183:(e,t,r)=>{"use strict";r.d(t,{tI:()=>f,Ln:()=>h});var n=r(89115),a=r(83830),s=r(58231);function i(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}}function o(e){var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};return(o=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var n,a=0;return function t(){for(;n=e.stack.pop();)try{if(!n.async&&1===a)return a=0,e.stack.push(n),Promise.resolve().then(t);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(t,function(e){return r(e),t()})}else a|=1}catch(e){r(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}var l=r(98003),u=r(57667);function c(e){var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};return(c=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var n,a=0;return function t(){for(;n=e.stack.pop();)try{if(!n.async&&1===a)return a=0,e.stack.push(n),Promise.resolve().then(t);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(t,function(e){return r(e),t()})}else a|=1}catch(e){r(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function f(e){return((0,n.Kn)(e)||(0,n.mf)(e))&&"function"==typeof e?.then&&"function"==typeof e?.catch}class d extends Error{constructor(e){super("Max depth reached at path: "+e.join(".")),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"path",void 0),this.path=e}}async function*p(e){let{data:t}=e,r=0,l=function(){let e="idle",t=i(),r=[],n=new Set,a=[];function l(r){if("pending"!==e)return;let s=function(e,t){let r=e[Symbol.asyncIterator](),n="idle";function a(){n="done",t=()=>{}}return{pull:function(){"idle"===n&&(n="pending",r.next().then(e=>{if(e.done){n="done",t({status:"return",value:e.value}),a();return}n="idle",t({status:"yield",value:e.value})}).catch(e=>{t({status:"error",error:e}),a()}))},destroy:async()=>{a(),await r.return?.()}}}(r,r=>{if("pending"===e){switch(r.status){case"yield":a.push([s,r]);break;case"return":n.delete(s);break;case"error":a.push([s,r]),n.delete(s)}t.resolve()}});n.add(s),s.pull()}return{add(t){switch(e){case"idle":r.push(t);break;case"pending":l(t)}},async *[Symbol.asyncIterator](){let u={stack:[],error:void 0,hasError:!1};try{if("idle"!==e)throw Error("Cannot iterate twice");for(e="pending",function(e,t,r){if(null!=t){var n,a;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");if(void 0===(n=t[Symbol.asyncDispose])){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");a=n=t[Symbol.dispose]}if("function"!=typeof n)throw TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else e.stack.push({async:!0})}(u,(0,s.e)({},async()=>{e="done";let r=[];if(await Promise.all(Array.from(n.values()).map(async e=>{try{await e.destroy()}catch(e){r.push(e)}})),a.length=0,n.clear(),t.resolve(),r.length>0)throw AggregateError(r)}),!0);r.length>0;)l(r.shift());for(;n.size>0;){for(await t.promise;a.length>0;){let[e,t]=a.shift();switch(t.status){case"yield":yield t.value,e.pull();break;case"error":throw t.error}}t=i()}}catch(e){u.error=e,u.hasError=!0}finally{let e=o(u);e&&await e}}}}();function p(e){let t=r++,n=e(t);return l.add(n),t}function h(t){return e.maxDepth&&t.length>e.maxDepth?new d(t):null}function y(t,r){var s;if(f(t))return[0,(s=t,p(async function*(t){let n=h(r);n&&(s.catch(t=>{e.onError?.({error:t,path:r})}),s=Promise.reject(n));try{let e=await s;yield[t,0,m(e,r)]}catch(n){e.onError?.({error:n,path:r}),yield[t,1,e.formatError?.({error:n,path:r})]}}))];if((0,n.D0)(t)){if(e.maxDepth&&r.length>=e.maxDepth)throw Error("Max depth reached");return[1,p(async function*(n){let s={stack:[],error:void 0,hasError:!1};try{let i=h(r);if(i)throw i;let o=function(e,t,r){if(null!=t){var n,a;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}(s,(0,a.mu)(t),!0);try{for(;;){let e=await o.next();if(e.done){yield[n,0,m(e.value,r)];break}yield[n,1,m(e.value,r)]}}catch(t){e.onError?.({error:t,path:r}),yield[n,2,e.formatError?.({error:t,path:r})]}}catch(e){s.error=e,s.hasError=!0}finally{let e=c(s);e&&await e}})]}return null}function m(e,t){if(void 0===e)return[[]];let r=y(e,t);if(r)return[[0],[null,...r]];if("[object Object]"!==Object.prototype.toString.call(e))return[[e]];let n={},a=[];for(let[r,s]of Object.entries(e)){let e=y(s,[...t,r]);if(!e){n[r]=s;continue}n[r]=0,a.push([r,...e])}return[[n],...a]}let g={};for(let[e,r]of Object.entries(t))g[e]=m(r,[e]);yield g;let b=l;for await(let t of(e.pingMs&&(b=(0,u.J)(l,e.pingMs)),b))yield t}function h(e){let t=(0,l.R)(p(e)),{serialize:r}=e;return r&&(t=t.pipeThrough(new TransformStream({transform(e,t){e===u.W?t.enqueue(u.W):t.enqueue(r(e))}}))),t.pipeThrough(new TransformStream({transform(e,t){e===u.W?t.enqueue(" "):t.enqueue(JSON.stringify(e)+"\n")}})).pipeThrough(new TextEncoderStream)}},21139:(e,t,r)=>{"use strict";r.d(t,{WO:()=>c,gl:()=>f}),r(93707);var n=r(18600),a=r(31609),s=r(89115),i=r(1330),o=r(83830);r(58231);var l=r(98003);r(24591);var u=r(57667);function c(e){let{serialize:t=s.yR}=e,r={enabled:e.ping?.enabled??!1,intervalMs:e.ping?.intervalMs??1e3},c=e.client??{};if(r.enabled&&c.reconnectAfterInactivityMs&&r.intervalMs>c.reconnectAfterInactivityMs)throw Error(`Ping interval must be less than client reconnect interval to prevent unnecessary reconnection - ping.intervalMs: ${r.intervalMs} client.reconnectAfterInactivityMs: ${c.reconnectAfterInactivityMs}`);async function*f(){let n,a;yield{event:"connected",data:JSON.stringify(c)};let s=e.data;for await(n of(e.emitAndEndImmediately&&(s=(0,o.Qm)(s,{count:1,gracePeriodMs:1})),e.maxDurationMs&&e.maxDurationMs>0&&e.maxDurationMs!==1/0&&(s=(0,o.QZ)(s,{maxDurationMs:e.maxDurationMs})),r.enabled&&r.intervalMs!==1/0&&r.intervalMs>0&&(s=(0,u.J)(s,r.intervalMs)),s)){if(n===u.W){yield{event:"ping",data:""};continue}(a=(0,i.ol)(n)?{id:n[0],data:n[1]}:{data:n}).data=JSON.stringify(t(a.data)),yield a,n=null,a=null}}async function*d(){try{yield*f(),yield{event:"return",data:""}}catch(i){if((0,a.D)(i))return;let r=(0,n.px)(i),s=e.formatError?.({error:r})??null;yield{event:"serialized-error",data:JSON.stringify(t(s))}}}return(0,l.R)(d()).pipeThrough(new TransformStream({transform(e,t){"event"in e&&t.enqueue(`event: ${e.event}
`),"data"in e&&t.enqueue(`data: ${e.data}
`),"id"in e&&t.enqueue(`id: ${e.id}
`),"comment"in e&&t.enqueue(`: ${e.comment}
`),t.enqueue("\n\n")}})).pipeThrough(new TextEncoderStream)}let f={"Content-Type":"text/event-stream","Cache-Control":"no-cache, no-transform","X-Accel-Buffering":"no",Connection:"keep-alive"}},1330:(e,t,r)=>{"use strict";r.d(t,{ol:()=>a});let n=Symbol();function a(e){return Array.isArray(e)&&e[2]===n}},83830:(e,t,r)=>{"use strict";r.d(t,{QZ:()=>c,Qm:()=>f,mu:()=>u});var n=r(93707),a=r(31609),s=r(58231),i=r(24591);function o(e,t,r){if(null!=t){var n,a;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function l(e){var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};return(l=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var n,a=0;return function t(){for(;n=e.stack.pop();)try{if(!n.async&&1===a)return a=0,e.stack.push(n),Promise.resolve().then(t);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(t,function(e){return r(e),t()})}else a|=1}catch(e){r(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function u(e){let t=e[Symbol.asyncIterator]();return(0,s.e)(t,async()=>{await t.return?.()})}async function*c(e,t){let r={stack:[],error:void 0,hasError:!1};try{let s;let l=o(r,u(e),!0),c=o(r,(0,i.Z)(t.maxDurationMs),!1).start();for(;;){if((s=await n.r.race([l.next(),c]))===i._&&(0,a.T)(),s.done)return s;yield s.value,s=null}}catch(e){r.error=e,r.hasError=!0}finally{let e=l(r);e&&await e}}async function*f(e,t){let r={stack:[],error:void 0,hasError:!1};try{let s;let l=o(r,u(e),!0),c=o(r,(0,i.Z)(t.gracePeriodMs),!1),f=t.count,d=new Promise(()=>{});for(;;){if((s=await n.r.race([l.next(),d]))===i._&&(0,a.T)(),s.done)return s.value;yield s.value,0==--f&&(d=c.start()),s=null}}catch(e){r.error=e,r.hasError=!0}finally{let e=l(r);e&&await e}}},58231:(e,t,r)=>{"use strict";var n,a;function s(e,t){let r=e[Symbol.dispose];return e[Symbol.dispose]=()=>{t(),r?.()},e}function i(e,t){let r=e[Symbol.asyncDispose];return e[Symbol.asyncDispose]=async()=>{await t(),await r?.()},e}r.d(t,{H:()=>s,e:()=>i}),(n=Symbol).dispose??(n.dispose=Symbol()),(a=Symbol).asyncDispose??(a.asyncDispose=Symbol())},98003:(e,t,r)=>{"use strict";function n(e){let t=e[Symbol.asyncIterator]();return new ReadableStream({async cancel(){await t.return?.()},async pull(e){let r=await t.next();if(r.done){e.close();return}e.enqueue(r.value)}})}r.d(t,{R:()=>n})},24591:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s,_:()=>a});var n=r(58231);let a=Symbol();function s(e){let t=null;return(0,n.H)({start(){if(t)throw Error("Timer already started");return new Promise(r=>{t=setTimeout(()=>r(a),e)})}},()=>{t&&clearTimeout(t)})}},57667:(e,t,r)=>{"use strict";r.d(t,{J:()=>u,W:()=>l});var n=r(93707),a=r(83830),s=r(24591);function i(e,t,r){if(null!=t){var n,a;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function o(e){var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};return(o=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var n,a=0;return function t(){for(;n=e.stack.pop();)try{if(!n.async&&1===a)return a=0,e.stack.push(n),Promise.resolve().then(t);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(t,function(e){return r(e),t()})}else a|=1}catch(e){r(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}let l=Symbol("ping");async function*u(e,t){let r={stack:[],error:void 0,hasError:!1};try{let u;let c=i(r,(0,a.mu)(e),!0),f=c.next();for(;;){let e={stack:[],error:void 0,hasError:!1};try{let r=i(e,(0,s.Z)(t),!1);if((u=await n.r.race([f,r.start()]))===s._){yield l;continue}if(u.done)return u.value;f=c.next(),yield u.value,u=null}catch(t){e.error=t,e.hasError=!0}finally{o(e)}}}catch(e){r.error=e,r.hasError=!0}finally{let e=o(r);e&&await e}}},265:(e,t,r)=>{"use strict";function n(e){return"input"in e?e:{input:e,output:e}}r.d(t,{KZ:()=>i,be:()=>n,p_:()=>a}),r(89115);let a={input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}};function s(e,t){return"error"in t?{...t,error:e.transformer.output.serialize(t.error)}:"data"in t.result?{...t,result:{...t.result,data:e.transformer.output.serialize(t.result.data)}}:t}function i(e,t){return Array.isArray(t)?t.map(t=>s(e,t)):s(e,t)}},89115:(e,t,r)=>{"use strict";r.d(t,{D0:()=>u,KH:()=>c,Kn:()=>s,Ne:()=>a,St:()=>o,mf:()=>i,yR:()=>f,yu:()=>n});let n=Symbol();function a(e,...t){let r=Object.assign(Object.create(null),e);for(let e of t)for(let t in e){if(t in r&&r[t]!==e[t])throw Error(`Duplicate key ${t}`);r[t]=e[t]}return r}function s(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}function i(e){return"function"==typeof e}function o(e){return Object.assign(Object.create(null),e)}let l="function"==typeof Symbol&&!!Symbol.asyncIterator;function u(e){return l&&s(e)&&Symbol.asyncIterator in e}let c=e=>e();function f(e){return e}},53949:(e,t,r)=>{"use strict";r.d(t,{R:()=>n});class n extends Error{constructor(e){super(e[0]?.message),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"issues",void 0),this.name="SchemaError",this.issues=e}}},93707:(e,t,r)=>{"use strict";var n;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{r:()=>o});let s=new WeakMap,i=()=>{};n=Symbol.toStringTag;class o{subscribe(){let e,t;let{settlement:r}=this;if(null===r){let r,n;if(null===this.subscribers)throw Error("Unpromise settled but still has subscribers");let a={promise:new Promise((e,t)=>{r=e,n=t}),resolve:r,reject:n};this.subscribers=[...this.subscribers,a],e=a.promise,t=()=>{null!==this.subscribers&&(this.subscribers=function(e,t){let r=e.indexOf(t);return -1!==r?[...e.slice(0,r),...e.slice(r+1)]:e}(this.subscribers,a))}}else{let{status:n}=r;e="fulfilled"===n?Promise.resolve(r.value):Promise.reject(r.reason),t=i}return Object.assign(e,{unsubscribe:t})}then(e,t){let r=this.subscribe(),{unsubscribe:n}=r;return Object.assign(r.then(e,t),{unsubscribe:n})}catch(e){let t=this.subscribe(),{unsubscribe:r}=t;return Object.assign(t.catch(e),{unsubscribe:r})}finally(e){let t=this.subscribe(),{unsubscribe:r}=t;return Object.assign(t.finally(e),{unsubscribe:r})}static proxy(e){let t=o.getSubscribablePromise(e);return void 0!==t?t:o.createSubscribablePromise(e)}static createSubscribablePromise(e){let t=new o(e);return s.set(e,t),s.set(t,t),t}static getSubscribablePromise(e){return s.get(e)}static resolve(e){let t="object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e);return o.proxy(t).subscribe()}static async any(e){let t=(Array.isArray(e)?e:[...e]).map(o.resolve);try{return await Promise.any(t)}finally{t.forEach(({unsubscribe:e})=>{e()})}}static async race(e){let t=(Array.isArray(e)?e:[...e]).map(o.resolve);try{return await Promise.race(t)}finally{t.forEach(({unsubscribe:e})=>{e()})}}static async raceReferences(e){let t=e.map(l);try{return await Promise.race(t)}finally{for(let e of t)e.unsubscribe()}}constructor(e){a(this,"promise",void 0),a(this,"subscribers",[]),a(this,"settlement",null),a(this,n,"Unpromise"),"function"==typeof e?this.promise=new Promise(e):this.promise=e;let t=this.promise.then(e=>{let{subscribers:t}=this;this.subscribers=null,this.settlement={status:"fulfilled",value:e},t?.forEach(({resolve:t})=>{t(e)})});"catch"in t&&t.catch(e=>{let{subscribers:t}=this;this.subscribers=null,this.settlement={status:"rejected",reason:e},t?.forEach(({reject:t})=>{t(e)})})}}function l(e){return o.proxy(e).then(()=>[e])}},539:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>Y});class n{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,t){this.keyToValue.set(e,t),this.valueToKey.set(t,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class a{constructor(e){this.generateIdentifier=e,this.kv=new n}register(e,t){this.kv.getByValue(e)||(t||(t=this.generateIdentifier(e)),this.kv.set(t,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class s extends a{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,t){"object"==typeof t?(t.allowProps&&this.classToAllowedProps.set(e,t.allowProps),super.register(e,t.identifier)):super.register(e,t)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function i(e,t){Object.entries(e).forEach(([e,r])=>t(r,e))}function o(e,t){return -1!==e.indexOf(t)}function l(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n}}class u{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return function(e,t){let r=function(e){if("values"in Object)return Object.values(e);let t=[];for(let r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}(e);if("find"in r)return r.find(t);for(let e=0;e<r.length;e++){let n=r[e];if(t(n))return n}}(this.transfomers,t=>t.isApplicable(e))}findByName(e){return this.transfomers[e]}}let c=e=>Object.prototype.toString.call(e).slice(8,-1),f=e=>void 0===e,d=e=>null===e,p=e=>"object"==typeof e&&null!==e&&e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype),h=e=>p(e)&&0===Object.keys(e).length,y=e=>Array.isArray(e),m=e=>"string"==typeof e,g=e=>"number"==typeof e&&!isNaN(e),b=e=>"boolean"==typeof e,E=e=>e instanceof Map,v=e=>e instanceof Set,w=e=>"Symbol"===c(e),S=e=>"number"==typeof e&&isNaN(e),_=e=>b(e)||d(e)||f(e)||g(e)||m(e)||w(e),O=e=>e===1/0||e===-1/0,R=e=>e.replace(/\./g,"\\."),T=e=>e.map(String).map(R).join("."),P=e=>{let t=[],r="";for(let n=0;n<e.length;n++){let a=e.charAt(n);if("\\"===a&&"."===e.charAt(n+1)){r+=".",n++;continue}if("."===a){t.push(r),r="";continue}r+=a}let n=r;return t.push(n),t};function A(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}let N=[A(f,"undefined",()=>null,()=>void 0),A(e=>"bigint"==typeof e,"bigint",e=>e.toString(),e=>"undefined"!=typeof BigInt?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),A(e=>e instanceof Date&&!isNaN(e.valueOf()),"Date",e=>e.toISOString(),e=>new Date(e)),A(e=>e instanceof Error,"Error",(e,t)=>{let r={name:e.name,message:e.message};return t.allowedErrorProps.forEach(t=>{r[t]=e[t]}),r},(e,t)=>{let r=Error(e.message);return r.name=e.name,r.stack=e.stack,t.allowedErrorProps.forEach(t=>{r[t]=e[t]}),r}),A(e=>e instanceof RegExp,"regexp",e=>""+e,e=>new RegExp(e.slice(1,e.lastIndexOf("/")),e.slice(e.lastIndexOf("/")+1))),A(v,"set",e=>[...e.values()],e=>new Set(e)),A(E,"map",e=>[...e.entries()],e=>new Map(e)),A(e=>S(e)||O(e),"number",e=>S(e)?"NaN":e>0?"Infinity":"-Infinity",Number),A(e=>0===e&&1/e==-1/0,"number",()=>"-0",Number),A(e=>e instanceof URL,"URL",e=>e.toString(),e=>new URL(e))];function I(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}let D=I((e,t)=>!!w(e)&&!!t.symbolRegistry.getIdentifier(e),(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,r)=>{let n=r.symbolRegistry.getValue(t[1]);if(!n)throw Error("Trying to deserialize unknown symbol");return n}),j=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),k=I(e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{let r=j[t[1]];if(!r)throw Error("Trying to deserialize unknown typed array");return new r(e)});function x(e,t){return!!e?.constructor&&!!t.classRegistry.getIdentifier(e.constructor)}let U=I(x,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{let r=t.classRegistry.getAllowedProps(e.constructor);if(!r)return{...e};let n={};return r.forEach(t=>{n[t]=e[t]}),n},(e,t,r)=>{let n=r.classRegistry.getValue(t[1]);if(!n)throw Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),e)}),M=I((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,r)=>{let n=r.customTransformerRegistry.findByName(t[1]);if(!n)throw Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),C=[U,D,M,k],$=(e,t)=>{let r=l(C,r=>r.isApplicable(e,t));if(r)return{value:r.transform(e,t),type:r.annotation(e,t)};let n=l(N,r=>r.isApplicable(e,t));if(n)return{value:n.transform(e,t),type:n.annotation}},L={};N.forEach(e=>{L[e.annotation]=e});let B=(e,t,r)=>{if(y(t))switch(t[0]){case"symbol":return D.untransform(e,t,r);case"class":return U.untransform(e,t,r);case"custom":return M.untransform(e,t,r);case"typed-array":return k.untransform(e,t,r);default:throw Error("Unknown transformation: "+t)}else{let n=L[t];if(!n)throw Error("Unknown transformation: "+t);return n.untransform(e,r)}},q=(e,t)=>{if(t>e.size)throw Error("index out of bounds");let r=e.keys();for(;t>0;)r.next(),t--;return r.next().value};function F(e){if(o(e,"__proto__"))throw Error("__proto__ is not allowed as a property");if(o(e,"prototype"))throw Error("prototype is not allowed as a property");if(o(e,"constructor"))throw Error("constructor is not allowed as a property")}let z=(e,t)=>{F(t);for(let r=0;r<t.length;r++){let n=t[r];if(v(e))e=q(e,+n);else if(E(e)){let a=+n,s=0==+t[++r]?"key":"value",i=q(e,a);switch(s){case"key":e=i;break;case"value":e=e.get(i)}}else e=e[n]}return e},K=(e,t,r)=>{if(F(t),0===t.length)return r(e);let n=e;for(let e=0;e<t.length-1;e++){let r=t[e];if(y(n))n=n[+r];else if(p(n))n=n[r];else if(v(n))n=q(n,+r);else if(E(n)){if(e===t.length-2)break;let a=+r,s=0==+t[++e]?"key":"value",i=q(n,a);switch(s){case"key":n=i;break;case"value":n=n.get(i)}}}let a=t[t.length-1];if(y(n)?n[+a]=r(n[+a]):p(n)&&(n[a]=r(n[a])),v(n)){let e=q(n,+a),t=r(e);e!==t&&(n.delete(e),n.add(t))}if(E(n)){let e=q(n,+t[t.length-2]);switch(0==+a?"key":"value"){case"key":{let t=r(e);n.set(t,n.get(e)),t!==e&&n.delete(e);break}case"value":n.set(e,r(n.get(e)))}}return e},W=(e,t)=>p(e)||y(e)||E(e)||v(e)||x(e,t),V=(e,t,r,n,a=[],s=[],l=new Map)=>{let u=_(e);if(!u){!function(e,t,r){let n=r.get(e);n?n.push(t):r.set(e,[t])}(e,a,t);let r=l.get(e);if(r)return n?{transformedValue:null}:r}if(!W(e,r)){let t=$(e,r),n=t?{transformedValue:t.value,annotations:[t.type]}:{transformedValue:e};return u||l.set(e,n),n}if(o(s,e))return{transformedValue:null};let c=$(e,r),f=c?.value??e,d=y(f)?[]:{},m={};i(f,(o,u)=>{if("__proto__"===u||"constructor"===u||"prototype"===u)throw Error(`Detected property ${u}. This is a prototype pollution risk, please remove it from your object.`);let c=V(o,t,r,n,[...a,u],[...s,e],l);d[u]=c.transformedValue,y(c.annotations)?m[u]=c.annotations:p(c.annotations)&&i(c.annotations,(e,t)=>{m[R(u)+"."+t]=e})});let g=h(m)?{transformedValue:d,annotations:c?[c.type]:void 0}:{transformedValue:d,annotations:c?[c.type,m]:m};return u||l.set(e,g),g};function H(e){return Object.prototype.toString.call(e).slice(8,-1)}function J(e){return"Array"===H(e)}class Y{constructor({dedupe:e=!1}={}){this.classRegistry=new s,this.symbolRegistry=new a(e=>e.description??""),this.customTransformerRegistry=new u,this.allowedErrorProps=[],this.dedupe=e}serialize(e){let t=new Map,r=V(e,t,this,this.dedupe),n={json:r.transformedValue};r.annotations&&(n.meta={...n.meta,values:r.annotations});let a=function(e,t){let r;let n={};return(e.forEach(e=>{if(e.length<=1)return;t||(e=e.map(e=>e.map(String)).sort((e,t)=>e.length-t.length));let[a,...s]=e;0===a.length?r=s.map(T):n[T(a)]=s.map(T)}),r)?h(n)?[r]:[r,n]:h(n)?void 0:n}(t,this.dedupe);return a&&(n.meta={...n.meta,referentialEqualities:a}),n}deserialize(e){let{json:t,meta:r}=e,n=function e(t,r={}){return J(t)?t.map(t=>e(t,r)):!function(e){if("Object"!==H(e))return!1;let t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}(t)?t:[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)].reduce((n,a)=>{if(J(r.props)&&!r.props.includes(a))return n;let s=e(t[a],r);return function(e,t,r,n,a){let s=({}).propertyIsEnumerable.call(n,t)?"enumerable":"nonenumerable";"enumerable"===s&&(e[t]=r),a&&"nonenumerable"===s&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}(n,a,s,t,r.nonenumerable),n},{})}(t);if(r?.values){var a,s,o;a=n,s=r.values,o=this,function e(t,r,n=[]){if(!t)return;if(!y(t)){i(t,(t,a)=>e(t,r,[...n,...P(a)]));return}let[a,s]=t;s&&i(s,(t,a)=>{e(t,r,[...n,...P(a)])}),r(a,n)}(s,(e,t)=>{a=K(a,t,t=>B(t,e,o))}),n=a}return r?.referentialEqualities&&(n=function(e,t){function r(t,r){let n=z(e,P(r));t.map(P).forEach(t=>{e=K(e,t,()=>n)})}if(y(t)){let[n,a]=t;n.forEach(t=>{e=K(e,P(t),()=>e)}),a&&i(a,r)}else i(t,r);return e}(n,r.referentialEqualities)),n}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,t){this.classRegistry.register(e,t)}registerSymbol(e,t){this.symbolRegistry.register(e,t)}registerCustom(e,t){this.customTransformerRegistry.register({name:t,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}Y.defaultInstance=new Y,Y.serialize=Y.defaultInstance.serialize.bind(Y.defaultInstance),Y.deserialize=Y.defaultInstance.deserialize.bind(Y.defaultInstance),Y.stringify=Y.defaultInstance.stringify.bind(Y.defaultInstance),Y.parse=Y.defaultInstance.parse.bind(Y.defaultInstance),Y.registerClass=Y.defaultInstance.registerClass.bind(Y.defaultInstance),Y.registerSymbol=Y.defaultInstance.registerSymbol.bind(Y.defaultInstance),Y.registerCustom=Y.defaultInstance.registerCustom.bind(Y.defaultInstance),Y.allowErrorProps=Y.defaultInstance.allowErrorProps.bind(Y.defaultInstance),Y.serialize,Y.deserialize,Y.stringify,Y.parse,Y.registerClass,Y.registerCustom,Y.registerSymbol,Y.allowErrorProps}};